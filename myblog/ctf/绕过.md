---
title: 绝强的漏洞绕过
---
Author:zyw

	菜鸡误入BUGKU，只得两眼泪汪汪！

	初入BUGKU,啥也不会，只能靠大神的WP度日，时间一长，到自认有点总结，欢迎各位看官指点一二，不胜感激。
	

一.矛盾
    代码如下;
	$num=$_GET['num'];
	if(!is_numeric($num))
	{
	echo $num;
	if($num==1)
	echo 'flag{**********}';
	}
    查询发现is_number()在判断时支持数字字符串，并且PHP存在一个弱类型比较漏洞，详情见；https://www.cnblogs.com/wh4am1/p/6687199.html
于是可以构建num=1XXXX,成功利用漏洞，得出结果 

二.备份是个好习惯
	对，没错，备份是个好习惯，Ctrl+S 、另存为不能停，谨防rm -rf
	不闲扯了，直接进入正题
	这个题目进去就看到一串字符，解码没什么名堂，看源码也没啥信息。最后直到题目叫备份是有原因的。
此处我们直接查看bak文件，打开后发现重要代码，重点如下：
if(md5($key1) == md5($key2) && $key1 !== $key2){
    echo $flag."取得flag";
}
显然若key1与key2不同，但是md5加密之后是相同的，这里就跟上面类似了，需要找到md5的漏洞，百度发现，使用数组会因为无法加密返回NULL，进而可以相等，
唉，强大的数组啊，于是构建:？index.php?key1[]=1&&key2[]=2,竟然没用，找大神的wp,竟然用到什么kekeyy，原谅我菜的真实，完全不知道这是个啥。但是构造
kekeyy1[]=1&&kekeyy2[]=2之后真的完美解决。

三.前女友
	没谈过恋爱的单身狗伤不起啊，哪来的前女友，算了，抹一把泪去看题。
	打开之后是一堆伤感的狗血感情，除了被虐外，啥也没收获。查看源码，终于发现好东西:code.txt，打开看看，惊喜的发现源码如下:
	<?php
	if(isset($_GET['v1']) && isset($_GET['v2']) && isset($_GET['v3'])){
   	 $v1 = $_GET['v1'];
    	$v2 = $_GET['v2'];
   	 $v3 = $_GET['v3'];
    	if($v1 != $v2 && md5($v1) == md5($v2)){
       	 if(!strcmp($v3, $flag)){
         	  echo $flag;
      	  }
   	 }
	}
	?>
代码审计之后发现还是漏洞绕过问题，这里于是使用绝强的数组进行绕过（菜的可怜的我只会使用这个了）GET值后成功完成。

四.各种绕过
	听到名字就觉得很刺激，打开看看
	首先就得开始代码审计，关键代码如下：
	$_GET['uname'] == $_POST['passwd']
	sha1($_GET['uname']) === sha1($_POST['passwd'])&($_GET['id']=='margin')
	显然只要id=margin,且uname与passwd不等，但shal之后相等即可。
	sh1（）与md5()一样无法处理数组，于是再一次使用强大的数组，分别get和post上去，收获flag
